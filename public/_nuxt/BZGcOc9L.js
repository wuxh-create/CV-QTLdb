import{d as de,H as ue,j as M,M as ce,r as d,N as L,O as _e,I as j,v as I,A as l,z as o,P as me,Q as ye,R as ve,x as a,B as r,S as fe,L as ge,t as P,T as Q,U as C,K as xe,y as O,V as be,W as qe}from"./BTGu2dYh.js";import{q as he,a as we,b as F}from"./CtcZllzW.js";import{_ as Ve,m as Ie}from"./Dv2ixm1C.js";import{_ as Ne,a as De,b as Se,c as ke,d as Pe,e as Te,f as Be}from"./CbgbUNeg.js";import{_ as Re,a as $e}from"./B-z2BPVc.js";import{_ as Le}from"./B4eBHn-4.js";import{_ as Qe}from"./D8G4fVbO.js";import{q as Ce}from"./wea4sSe8.js";import"./BQTLAjhu.js";const Oe={class:"row"},ze={class:"col-12 col-sm-4 items-center justify-between q-my-xs"},Ee={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},Me={class:"row"},je={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},Fe={class:"col-12 col-sm-6"},Ue={class:"row items-center justify-center q-gutter-x-xl"},He={class:"row justify-center q-pb-md q-my-xs"},Ae={class:"q-px-sm q-gutter-x-xs"},Ge={class:"row no-wrap q-pl-md q-gutter-x-lg"},Ye={class:"text-primary"},Ke={class:"row no-wrap"},T="eQTL",st=de({__name:"eQTL",setup(We){const g=ue(),B=M(()=>g.screen.lt.sm),v=ce(),R=d(!1),c=L({variant:"none",phenotype:"none",samples:{},data:{}}),U=n=>{he({variant_type:n.Variant_type,variant_id:n.Variant_ID,phenotype_type:T,phenotype_id:n.Phenotype_ID}).then(e=>{const i=e;if(i.data){R.value=!0,c.variant=n.Variant_ID,c.phenotype=n.Phenotype_ID;for(const s in["0","1","2"])i.data[`n_${s}`]>0?(c.samples[s]=i.data[`n_${s}`],c.data[s]=i.data[`data_${s}`].split(",").map(Number)):(c.samples[s]=0,c.data[s]=[])}else g.notify({message:"No data found!",color:"negative",icon:"warning"})})},m=d(null),_=d(null),y=d(null),x=L({variant_type:null,variant_id:null,phenotype_id:null}),f=L({SNP:0,MNV:0,InDel:0,SV:0}),H=["SNP","MNV","InDel","SV"],b=d([]),q=d([]),S=d(null),k=d(null),A=(n,e,i)=>{e(()=>{n===""?b.value=[]:Ce({variant_type:_.value,input:n}).then(s=>{const p=s;p.data.length?b.value=p.data:b.value=[n],b.value=p.data,n!==""&&S.value.options.length&&(S.value.setOptionIndex(-1),S.value.moveOptionSelection(1,!0))}).catch(s=>{b.value=[n]})}),i(()=>{})},G=(n,e,i)=>{e(()=>{n===""?q.value=[]:we({phenotype_type:T,input:n}).then(s=>{const p=s;p.data.length?q.value=p.data:q.value=[n],q.value=p.data,n!==""&&k.value.options.length&&(k.value.setOptionIndex(-1),k.value.moveOptionSelection(1,!0))}).catch(s=>{q.value=[n]})}),i(()=>{})},Y=M(()=>{const n=!!_.value,e=!!y.value,i=!!m.value;return n||e||i}),K=[{label:"example1",variantType:"SNP",variantID:null,phenotypeID:null,disable:!1},{label:"example2",variantType:"InDel",variantID:null,phenotypeID:null,disable:!1}],W=n=>{m.value=n.phenotypeID,_.value=n.variantType,y.value=n.variantID},$=d([]),h=d(!1),u=d({page:1,rowsPerPage:15,rowsNumber:0,sortBy:"FDR",descending:!1}),J=n=>{h.value=!0;const{page:e,rowsPerPage:i,sortBy:s,descending:p}=n.pagination;F({variant_type:x.variant_type,variant_id:x.variant_id,phenotype_type:T,phenotype_id:x.phenotype_id,page:e,pageSize:i,sortBy:s,order:p?-1:1}).then(N=>{const D=N;$.value=D.data,u.value.rowsNumber=D.total}).finally(()=>{h.value=!1,u.value.page=e,u.value.rowsPerPage=i,u.value.sortBy=s,u.value.descending=p})},X=d(!1),Z=()=>{g.notify({message:"Download will be not available untill published",color:"negative",icon:"warning"})},z=()=>{Y.value?(h.value=!0,F({variant_type:_.value,variant_id:y.value,phenotype_type:T,phenotype_id:m.value,page:1,pageSize:u.value.rowsPerPage,sortBy:u.value.sortBy,order:u.value.descending?-1:1}).then(n=>{const e=n;e.total?($.value=e.data,u.value.rowsNumber=e.total,x.variant_type=_.value,x.variant_id=y.value,x.phenotype_id=m.value,f.SNP=e.stat.SNP,f.MNV=e.stat.MNV,f.InDel=e.stat.InDel,f.SV=e.stat.SV):g.notify({message:"No data found!",color:"negative",icon:"warning"}),h.value=!1}).catch(n=>{g.notify({message:n,color:"negative",icon:"warning"}),h.value=!1})):g.notify({message:"Please input at least one field!",color:"negative",icon:"warning"})},ee=()=>{m.value=null,_.value=null,y.value=null};return _e(()=>{Object.keys(v.query).length?(_.value=v.query.variant_type?String(v.query.variant_type):"SNP",y.value=v.query.variant_id?String(v.query.variant_id):null,m.value=v.query.phenotype_id?String(v.query.phenotype_id):null):(_.value="SV",y.value=null,m.value=null),z()}),(n,e)=>{const i=ve,s=ye,p=me,N=De,D=$e,E=Re,w=ge,te=Ne,ne=Be,oe=Te,ae=Pe,le=Le,se=ke,ie=Se,re=Qe;return I(),j(re,{style:{"min-height":"calc(100vh - 125px)",margin:"5px auto 0 auto"},class:"q-pa-md"},{default:l(()=>[o(p,{modelValue:R.value,"onUpdate:modelValue":e[0]||(e[0]=t=>R.value=t)},{default:l(()=>[o(s,{style:{width:"550px",height:"500px"}},{default:l(()=>[o(i,null,{default:l(()=>[o(Ve,{x_title:c.variant,y_title:c.phenotype,data:c.data,samples:c.samples},null,8,["x_title","y_title","data","samples"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(s,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-none"},{default:l(()=>[o(i,{class:"row q-py-none q-px-none"},{default:l(()=>e[5]||(e[5]=[a("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," Search eQTL by Variant or Gene ",-1)])),_:1}),o(i,{class:"q-px-md q-pt-md q-pb-sm"},{default:l(()=>e[6]||(e[6]=[a("div",{class:"text-body1 text-grey-8",style:{"line-height":"1.7"}},[r(" This module provides 303,249 eQTLs identified from 148 healthy Chinese individuals, linking genetic variants to the expression levels of 78,279 protein-coding genes quantified from RNA-sequencing data. The eQTL pages comprises associations derived from four variant types: "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 246,966 "),r(" SNV-eQTL pairs regulating "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 2,783 "),r(" genes, "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 18,432 "),r(" InDel-eQTL pairs regulating "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 2,036 "),r(" genes, "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 12,949 "),r(" MNV-eQTL pairs regulating "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 1,729 "),r(" genes, and "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 1,318 "),r(" SV-eQTL pairs regulating "),a("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 706 "),r("genes. "),a("br")],-1)])),_:1}),o(te,{onSubmit:z,onReset:ee,class:fe([{"q-mx-auto":B.value},"q-py-sm"])},{default:l(()=>[a("div",Oe,[a("div",ze,[e[7]||(e[7]=a("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Variant Type:",-1)),o(N,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Select variant type","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),options:H},null,8,["modelValue"])]),a("div",Ee,[e[9]||(e[9]=a("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Variant ID:",-1)),o(N,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input variant ID","input-debounce":"1000",class:"col-12 col-sm-8 q-px-sm q-py-xs","input-class":"text-primary",modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=t=>y.value=t),options:b.value,onFilter:A,ref_key:"ref_variant_id",ref:S},{"no-option":l(()=>[o(E,null,{default:l(()=>[o(D,{class:"text-grey"},{default:l(()=>e[8]||(e[8]=[r(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),a("div",Me,[a("div",je,[e[11]||(e[11]=a("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Gene ID:",-1)),o(N,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input gene ID","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),options:q.value,onFilter:G,ref_key:"ref_phenotype_id",ref:k},{"no-option":l(()=>[o(E,null,{default:l(()=>[o(D,{class:"text-grey"},{default:l(()=>e[10]||(e[10]=[r(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),a("div",Fe,[a("div",Ue,[o(w,{unelevated:"","no-caps":"",color:"primary",label:"Submit",type:"submit"}),o(w,{unelevated:"","no-caps":"",color:"negative",label:"Reset",type:"reset"})])])]),_:1},8,["class"]),a("div",He,[a("div",Ae,[(I(),P(Q,null,C(K,t=>o(w,{class:"text-indigo-6",key:t.label,label:t.label,dense:B.value,disable:t.disable,flat:"","no-caps":"",ripple:!1,onClick:V=>W(t)},null,8,["label","dense","disable","onClick"])),64))])])]),_:1}),o(s,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-md q-px-none"},{default:l(()=>[o(ie,{flat:"","row-key":"label",pagination:u.value,"onUpdate:pagination":e[4]||(e[4]=t=>u.value=t),rows:$.value,columns:xe(Ie),dense:B.value,loading:h.value,"rows-per-page-options":[15,50,100],"rows-per-page-label":"Rows per page:","pagination-label":(t,V,pe)=>`${t}~${V} / ${pe}`,onRequest:J,separator:"cell","no-data-label":"No data",ref:"table"},{loading:l(()=>[o(ne,{showing:"",color:"primary"})]),"top-left":l(()=>[a("div",Ge,[(I(!0),P(Q,null,C(Object.keys(f),t=>be((I(),P("div",{key:t,class:"col-auto text-center text-subtitle1 text-bold"},[a("div",null,O(f[t]),1),a("div",Ye,O(t),1)])),[[qe,f[t]!==0]])),128))])]),"top-right":l(t=>[a("div",Ke,[o(w,{flat:"",dense:"",ripple:!1,icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen},null,8,["icon","onClick"]),o(w,{flat:"",dense:"",ripple:!1,loading:X.value,icon:"file_download",onClick:Z},null,8,["loading"])])]),header:l(t=>[o(ae,{props:t},{default:l(()=>[(I(!0),P(Q,null,C(t.cols,V=>(I(),j(oe,{key:V.name,props:t,class:"text-primary",style:{"font-weight":"bold","font-size":"14px"}},{default:l(()=>[r(O(V.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-Plot":l(t=>[o(se,{key:"plot",props:t},{default:l(()=>[o(w,{size:"md",color:"primary",icon:"bar_chart",dense:"",rounded:"",outline:"",onClick:V=>U(t.row)},{default:l(()=>[o(le,null,{default:l(()=>e[12]||(e[12]=[r(" Show boxplot ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns","dense","loading","pagination-label"])]),_:1})]),_:1})}}});export{st as default};
