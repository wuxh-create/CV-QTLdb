import{d as _e,H as me,j as U,M as ye,r as p,N as j,O as fe,I as M,v as Q,A as a,z as n,P as ve,Q as be,R as ge,x as l,B as q,S as xe,L as he,t as V,T as R,U as E,K as qe,y as z,V as we,W as Te}from"./BTGu2dYh.js";import{_ as Ie}from"./3Ht2rspR.js";import{_ as Pe,a as Ne,b as Qe,c as Le,d as ke,e as Be,f as Ce}from"./CbgbUNeg.js";import{_ as Ve,a as Se}from"./B-z2BPVc.js";import{_ as De}from"./B4eBHn-4.js";import{_ as $e}from"./D8G4fVbO.js";import"./BQTLAjhu.js";const G=({phenotype_type:_,phenotype_id:s,indicator_type:x,indicator_name:u,page:L=1,pageSize:k=10,sortBy:S="Cor_pearson",order:m=-1})=>$fetch("/api/correlation",{method:"GET",params:{phenotype_type:_,phenotype_id:s,indicator_type:x,indicator_name:u,page:L,pageSize:k,sortBy:S,order:m}}),Re=({phenotype_type:_,phenotype_id:s,indicator_type:x,indicator_name:u})=>$fetch("/api/dotplot",{method:"GET",params:{phenotype_type:_,phenotype_id:s,indicator_type:x,indicator_name:u}}),Ee=({indicator_type:_,input:s})=>$fetch("/api/hint_indicator",{method:"GET",params:{indicator_type:_,input:s}}),ze=({phenotype_type:_,input:s})=>$fetch("/api/hint_phenotype",{method:"GET",params:{phenotype_type:_,input:s}}),He=[{name:"Plot",label:"Plot",field:"",sortable:!1,align:"center"},{name:"Indicator_type",label:"Indicator_type",field:"Indicator_type",sortable:!1,align:"center"},{name:"Indicator_name",label:"Indicator_name",field:"Indicator_name",sortable:!1,align:"center"},{name:"Phenotype_type",label:"Phenotype_type",field:"Phenotype_type",sortable:!1,align:"center"},{name:"Phenotype_ID",label:"Phenotype_ID",field:"Phenotype_ID",sortable:!1,align:"center"},{name:"Cor_pearson",label:"R_pearson",field:"Cor_pearson",sortable:!0,align:"center",format:(_,s)=>Number(_).toFixed(3)},{name:"Cor_spearman",label:"R_spearman",field:"Cor_spearman",sortable:!0,align:"center",format:(_,s)=>Number(_).toFixed(3)}],Fe={class:"row"},Oe={class:"col-12 col-sm-4 items-center justify-between q-my-xs"},Ue={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},je={class:"row"},Me={class:"col-12 col-sm-4 items-center justify-between q-my-xs"},Ge={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},Ae={class:"col-12 col-sm-6"},We={class:"row items-center justify-center q-gutter-x-xl"},Ke={class:"row justify-center q-pb-sm q-my-xs"},Je={class:"q-px-sm q-gutter-x-xs"},Xe={class:"row no-wrap q-pl-md q-gutter-x-lg"},Ye={class:"text-primary"},Ze={class:"row no-wrap"},it=_e({__name:"correlation",setup(_){const s=me(),x=U(()=>s.screen.lt.sm),u=ye(),L=p(!1),k=p(""),S=o=>{Re({phenotype_type:o.Phenotype_type,phenotype_id:o.Phenotype_ID,indicator_type:o.Indicator_type,indicator_name:o.Indicator_name}).then(e=>{const d=e;d.data?(L.value=!0,k.value=d.data.figure_base64_code):s.notify({message:"No data found!",color:"negative",icon:"warning"})})},m=p(null),v=p(null),f=p(null),b=p(null),g=j({phenotype_type:null,phenotype_id:null,indicator_type:null,indicator_name:null}),c=j({apaQTL:0,eQTL:0,meQTL:0,sQTL:0,Pathology:0,Nutrition:0,Toxin:0,Measurement:0,Hormone:0,Questionnaire:0}),A=["apaQTL","eQTL","sQTL"],W=["Pathology","Nutrition","Toxin","Measurement","Hormone","Questionnaire"],w=p([]),T=p([]),B=p(null),C=p(null),K=(o,e,d)=>{e(()=>{o===""?w.value=[]:ze({phenotype_type:f.value,input:o}).then(i=>{const r=i;r.data.length?w.value=r.data:w.value=[o],w.value=r.data,o!==""&&B.value.options.length&&(B.value.setOptionIndex(-1),B.value.moveOptionSelection(1,!0))}).catch(i=>{w.value=[o]})}),d(()=>{})},J=(o,e,d)=>{e(()=>{o===""?T.value=[]:Ee({indicator_type:m.value,input:o}).then(i=>{const r=i;r.data.length?T.value=r.data:T.value=[o],T.value=r.data,o!==""&&C.value.options.length&&(C.value.setOptionIndex(-1),C.value.moveOptionSelection(1,!0))}).catch(i=>{T.value=[o]})}),d(()=>{})},X=U(()=>{const o=!!f.value,e=!!b.value,d=!!m.value,i=!!v.value;return o||e||d||i}),Y=[{label:"example1",phenotypeType:"eQTL",phenotypeID:"ENSG00000232882.1",indicatorType:"Toxin",indicatorName:"TPOAb",disable:!1},{label:"example2",phenotypeType:"sQTL",phenotypeID:null,indicatorType:"Nutrition",indicatorName:"Whole blood Fe",disable:!1},{label:"example3",phenotypeType:"eQTL",phenotypeID:null,indicatorType:"Hormone",indicatorName:"PTH",disable:!1}],Z=o=>{m.value=o.indicatorType,v.value=o.indicatorName,f.value=o.phenotypeType,b.value=o.phenotypeID},D=p([]),I=p(!1),y=p({page:1,rowsPerPage:15,rowsNumber:0,sortBy:"Cor_pearson",descending:!0}),ee=o=>{I.value=!0;const{page:e,rowsPerPage:d,sortBy:i,descending:r}=o.pagination;G({phenotype_type:g.phenotype_type,phenotype_id:g.phenotype_id,indicator_type:g.indicator_type,indicator_name:g.indicator_name,page:e,pageSize:d,sortBy:i,order:r?-1:1}).then($=>{const h=$;D.value=h.data,y.value.rowsNumber=h.total??0}).finally(()=>{I.value=!1,y.value.page=e,y.value.rowsPerPage=d,y.value.sortBy=i,y.value.descending=r})},te=p(!1),oe=()=>{s.notify({message:"Download will be not available untill published",color:"negative",icon:"warning"})},H=()=>{X.value?(I.value=!0,G({phenotype_type:f.value,phenotype_id:b.value,indicator_type:m.value,indicator_name:v.value,page:1,pageSize:y.value.rowsPerPage,sortBy:y.value.sortBy,order:y.value.descending?-1:1}).then(o=>{const e=o;e.total?(D.value=e.data,y.value.rowsNumber=e.total,g.phenotype_type=f.value,g.phenotype_id=b.value,g.indicator_type=m.value,g.indicator_name=v.value,c.apaQTL=e.stat.apaQTL,c.eQTL=e.stat.eQTL,c.meQTL=e.stat.meQTL,c.sQTL=e.stat.sQTL,c.Pathology=e.stat.Pathology,c.Nutrition=e.stat.Nutrition,c.Toxin=e.stat.Toxin,c.Measurement=e.stat.Measurement,c.Hormone=e.stat.Hormone,c.Questionnaire=e.stat.Questionnaire):s.notify({message:"No data found!",color:"negative",icon:"warning"}),I.value=!1}).catch(o=>{s.notify({message:o,color:"negative",icon:"warning"}),I.value=!1})):s.notify({message:"Please input at least one field!",color:"negative",icon:"warning"})},ne=()=>{m.value=null,v.value=null,f.value=null,b.value=null};return fe(()=>{Object.keys(u.query).length?(f.value=u.query.phenotype_type?String(u.query.phenotype_type):"eQTL",b.value=u.query.phenotype_id?String(u.query.phenotype_id):null,m.value=u.query.indicator_type?String(u.query.indicator_type):null,v.value=u.query.indicator_name?String(u.query.indicator_name):null):(f.value="eQTL",b.value=null,m.value=null,v.value=null),H()}),(o,e)=>{const d=Ie,i=ge,r=be,$=ve,h=Ne,F=Se,O=Ve,P=he,ae=Pe,le=Ce,se=Be,ie=ke,re=De,pe=Le,ue=Qe,ce=$e;return Q(),M(ce,{style:{"min-height":"calc(100vh - 125px)",margin:"5px auto 0 auto"},class:"q-pa-md"},{default:a(()=>[n($,{modelValue:L.value,"onUpdate:modelValue":e[0]||(e[0]=t=>L.value=t)},{default:a(()=>[n(r,{style:{width:"400px",height:"400px"}},{default:a(()=>[n(i,null,{default:a(()=>[n(d,{src:"data:image/png;base64,"+k.value,"spinner-color":"white",fit:"contain"},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(r,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-none"},{default:a(()=>[n(i,{class:"row q-py-none q-px-none"},{default:a(()=>e[6]||(e[6]=[l("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," Search Correaltion by Phenotype or Indicator ",-1)])),_:1}),n(i,{class:"q-px-md q-pt-md q-pb-sm"},{default:a(()=>e[7]||(e[7]=[l("div",{class:"text-body1 text-grey-8",style:{"line-height":"1.7"}},[q(" This module provides comprehensive pairwise correlations identified from 148 healthy Chinese individuals, revealing regulatory connections between genetic variants, molecular phenotypes, and clinical traits. The correlation dataset integrates multi-omics associations, including colocalization between "),l("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," genetic variants and molecular phenotypes (eQTL, sQTL, apaQTL, meQTL), "),q(" colocalization between "),l("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," molecular phenotypes and clinical traits, "),q(" and mediation relationships linking "),l("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," variants → molecular phenotypes → clinical outcomes. "),l("br")],-1)])),_:1}),n(ae,{onSubmit:H,onReset:ne,class:xe([{"q-mx-auto":x.value},"q-py-sm"])},{default:a(()=>[l("div",Fe,[l("div",Oe,[e[8]||(e[8]=l("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Phenotype Type:",-1)),n(h,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Select phenotype type","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),options:A},null,8,["modelValue"])]),l("div",Ue,[e[10]||(e[10]=l("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Phenotype ID:",-1)),n(h,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input phenotype ID","input-debounce":"1000",class:"col-12 col-sm-8 q-px-sm q-py-xs","input-class":"text-primary",modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t),options:w.value,onFilter:K,ref_key:"ref_phenotype_id",ref:B},{"no-option":a(()=>[n(O,null,{default:a(()=>[n(F,{class:"text-grey"},{default:a(()=>e[9]||(e[9]=[q(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),l("div",je,[l("div",Me,[e[11]||(e[11]=l("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Indicator Type:",-1)),n(h,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Select indicator type","input-debounce":"1000",class:"col-sm-10 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),options:W},null,8,["modelValue"])]),l("div",Ge,[e[13]||(e[13]=l("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Indicator name:",-1)),n(h,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input indicator name","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=t=>v.value=t),options:T.value,onFilter:J,ref_key:"ref_indicator_name",ref:C},{"no-option":a(()=>[n(O,null,{default:a(()=>[n(F,{class:"text-grey"},{default:a(()=>e[12]||(e[12]=[q(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),l("div",Ae,[l("div",We,[n(P,{unelevated:"","no-caps":"",color:"primary",label:"Submit",type:"submit"}),n(P,{unelevated:"","no-caps":"",color:"negative",label:"Reset",type:"reset"})])])]),_:1},8,["class"]),l("div",Ke,[l("div",Je,[(Q(),V(R,null,E(Y,t=>n(P,{class:"text-indigo-6",key:t.label,label:t.label,dense:x.value,disable:t.disable,flat:"","no-caps":"",ripple:!1,onClick:N=>Z(t)},null,8,["label","dense","disable","onClick"])),64))])])]),_:1}),n(r,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-md q-px-none"},{default:a(()=>[n(ue,{flat:"","row-key":"label",pagination:y.value,"onUpdate:pagination":e[5]||(e[5]=t=>y.value=t),rows:D.value,columns:qe(He),dense:x.value,loading:I.value,"rows-per-page-options":[15,50,100],"rows-per-page-label":"Rows per page:","pagination-label":(t,N,de)=>`${t}~${N} / ${de}`,onRequest:ee,separator:"cell","no-data-label":"No data"},{loading:a(()=>[n(le,{showing:"",color:"primary"})]),"top-left":a(()=>[l("div",Xe,[(Q(!0),V(R,null,E(Object.keys(c),t=>we((Q(),V("div",{key:t,class:"col-auto text-center text-subtitle1 text-bold"},[l("div",null,z(c[t]),1),l("div",Ye,z(t),1)])),[[Te,c[t]!==0]])),128))])]),"top-right":a(t=>[l("div",Ze,[n(P,{flat:"",dense:"",ripple:!1,icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen},null,8,["icon","onClick"]),n(P,{flat:"",dense:"",ripple:!1,loading:te.value,icon:"file_download",onClick:oe},null,8,["loading"])])]),header:a(t=>[n(ie,{props:t},{default:a(()=>[(Q(!0),V(R,null,E(t.cols,N=>(Q(),M(se,{key:N.name,props:t,class:"text-primary",style:{"font-weight":"bold","font-size":"14px"}},{default:a(()=>[q(z(N.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-Plot":a(t=>[n(pe,{key:"plot",props:t},{default:a(()=>[n(P,{size:"md",color:"primary",icon:"scatter_plot",dense:"",rounded:"",outline:"",onClick:N=>S(t.row)},{default:a(()=>[n(re,null,{default:a(()=>e[14]||(e[14]=[q(" Show doxplot ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns","dense","loading","pagination-label"])]),_:1})]),_:1})}}});export{it as default};
