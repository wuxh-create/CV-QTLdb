import{X as se,Y as B,Z as T,$ as U,a0 as ie,a1 as V,a2 as O,a3 as K,a4 as re,a5 as J,a6 as le,r as ee,j as w,a7 as ue,h as P,a8 as de,a9 as ce,aa as Q,ab as pe,ac as R,ad as me,ae as fe,af as ve,d as he,H as be,I as _e,v as C,A as b,x as z,z as v,Q as ge,R as ye,t as A,T as D,U as S,L as xe,ag as Y,K as G}from"./BTGu2dYh.js";import{u as we,a as qe,b as Ce,_ as Pe}from"./B_7bHzJj.js";import{c as ke}from"./BQTLAjhu.js";import{_ as Te}from"./D8G4fVbO.js";import"./CLhFfczW.js";const I={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ae=Object.keys(I);I.all=!0;function F(t){const n={};for(const s of Ae)t[s]===!0&&(n[s]=!0);return Object.keys(n).length===0?I:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const De=["INPUT","TEXTAREA"];function H(t,n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&De.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function Se(t){const n=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((s,p)=>{const m=parseFloat(s);m&&(n[p]=m)}),n}const $e=se({name:"touch-swipe",beforeMount(t,{value:n,arg:s,modifiers:p}){if(p.mouse!==!0&&T.has.touch!==!0)return;const m=p.mouseCapture===!0?"Capture":"",e={handler:n,sensitivity:Se(s),direction:F(p),noop:ie,mouseStart(i){H(i,e)&&re(i)&&(V(e,"temp",[[document,"mousemove","move",`notPassive${m}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(i,!0))},touchStart(i){if(H(i,e)){const o=i.target;V(e,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),e.start(i)}},start(i,o){T.is.firefox===!0&&U(t,!0);const l=K(i);e.event={x:l.left,y:l.top,time:Date.now(),mouse:o===!0,dir:!1}},move(i){if(e.event===void 0)return;if(e.event.dir!==!1){O(i);return}const o=Date.now()-e.event.time;if(o===0)return;const l=K(i),h=l.left-e.event.x,u=Math.abs(h),f=l.top-e.event.y,d=Math.abs(f);if(e.event.mouse!==!0){if(u<e.sensitivity[1]&&d<e.sensitivity[1]){e.end(i);return}}else if(window.getSelection().toString()!==""){e.end(i);return}else if(u<e.sensitivity[2]&&d<e.sensitivity[2])return;const y=u/o,_=d/o;e.direction.vertical===!0&&u<d&&u<100&&_>e.sensitivity[0]&&(e.event.dir=f<0?"up":"down"),e.direction.horizontal===!0&&u>d&&d<100&&y>e.sensitivity[0]&&(e.event.dir=h<0?"left":"right"),e.direction.up===!0&&u<d&&f<0&&u<100&&_>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&u<d&&f>0&&u<100&&_>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&u>d&&h<0&&d<100&&y>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&u>d&&h>0&&d<100&&y>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(O(i),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ke(),e.styleCleanup=q=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const r=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(r,50):r()}),e.handler({evt:i,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:o,distance:{x:u,y:d}})):e.end(i)},end(i){var o;e.event!==void 0&&(B(e,"temp"),T.is.firefox===!0&&U(t,!1),(o=e.styleCleanup)==null||o.call(e,!0),i!==void 0&&e.event.dir!==!1&&O(i),e.event=void 0)}};if(t.__qtouchswipe=e,p.mouse===!0){const i=p.mouseCapture===!0||p.mousecapture===!0?"Capture":"";V(e,"main",[[t,"mousedown","mouseStart",`passive${i}`]])}T.has.touch===!0&&V(e,"main",[[t,"touchstart","touchStart",`passive${p.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const s=t.__qtouchswipe;s!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&s.end(),s.handler=n.value),s.direction=F(n.modifiers))},beforeUnmount(t){var s;const n=t.__qtouchswipe;n!==void 0&&(B(n,"main"),B(n,"temp"),T.is.firefox===!0&&U(t,!1),(s=n.styleCleanup)==null||s.call(n),delete t.__qtouchswipe)}});function Le(){let t=Object.create(null);return{getCache:(n,s)=>t[n]===void 0?t[n]=typeof s=="function"?s():s:t[n],setCache(n,s){t[n]=s},hasCache(n){return Object.hasOwnProperty.call(t,n)},clearCache(n){n!==void 0?delete t[n]:t=Object.create(null)}}}const Ve={name:{required:!0},disable:Boolean},Z={setup(t,{slots:n}){return()=>P("div",{class:"q-panel scroll",role:"tabpanel"},Q(n.default))}},ze={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ee=["update:modelValue","beforeTransition","transition"];function Ne(){const{props:t,emit:n,proxy:s}=J(),{getCache:p}=Le(),{registerTimeout:m}=le();let e,i;const o=ee(null),l={value:null};function h(a){const c=t.vertical===!0?"up":"left";k((s.$q.lang.rtl===!0?-1:1)*(a.direction===c?1:-1))}const u=w(()=>[[$e,h,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),f=w(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),d=w(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),y=w(()=>`--q-transition-duration: ${t.transitionDuration}ms`),_=w(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),q=w(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),r=w(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);ue(()=>t.modelValue,(a,c)=>{const g=$(a)===!0?N(a):-1;i!==!0&&M(g===-1?0:g<N(c)?-1:1),l.value!==g&&(l.value=g,n("beforeTransition",a,c),m(()=>{n("transition",a,c)},t.transitionDuration))});function x(){k(1)}function E(){k(-1)}function j(a){n("update:modelValue",a)}function $(a){return a!=null&&a!==""}function N(a){return e.findIndex(c=>c.props.name===a&&c.props.disable!==""&&c.props.disable!==!0)}function te(){return e.filter(a=>a.props.disable!==""&&a.props.disable!==!0)}function M(a){const c=a!==0&&t.animated===!0&&l.value!==-1?"q-transition--"+(a===-1?f.value:d.value):null;o.value!==c&&(o.value=c)}function k(a,c=l.value){let g=c+a;for(;g!==-1&&g<e.length;){const L=e[g];if(L!==void 0&&L.props.disable!==""&&L.props.disable!==!0){M(a),i=!0,n("update:modelValue",L.props.name),setTimeout(()=>{i=!1});return}g+=a}t.infinite===!0&&e.length!==0&&c!==-1&&c!==e.length&&k(a,a===-1?e.length:-1)}function W(){const a=N(t.modelValue);return l.value!==a&&(l.value=a),!0}function X(){const a=$(t.modelValue)===!0&&W()&&e[l.value];return t.keepAlive===!0?[P(pe,q.value,[P(r.value===!0?p(_.value,()=>({...Z,name:_.value})):Z,{key:_.value,style:y.value},()=>a)])]:[P("div",{class:"q-panel scroll",style:y.value,key:_.value,role:"tabpanel"},[a])]}function ne(){if(e.length!==0)return t.animated===!0?[P(de,{name:o.value},X)]:X()}function oe(a){return e=ce(Q(a.default,[])).filter(c=>c.props!==null&&c.props.slot===void 0&&$(c.props.name)===!0),e.length}function ae(){return e}return Object.assign(s,{next:x,previous:E,goTo:j}),{panelIndex:l,panelDirectives:u,updatePanelsList:oe,updatePanelIndex:W,getPanelContent:ne,getEnabledPanels:te,getPanels:ae,isValidPanelName:$,keepAliveProps:q,needsUniqueKeepAliveWrapper:r,goToPanelByOffset:k,goToPanel:j,nextPanel:x,previousPanel:E}}const Be=R({name:"QTab",props:qe,emits:we,setup(t,{slots:n,emit:s}){const{renderTab:p}=Ce(t,n,s);return()=>p("div")}}),Ue=R({name:"QTabPanels",props:{...ze,...me},emits:Ee,setup(t,{slots:n}){const s=J(),p=fe(t,s.proxy.$q),{updatePanelsList:m,getPanelContent:e,panelDirectives:i}=Ne(),o=w(()=>"q-tab-panels q-panel-parent"+(p.value===!0?" q-tab-panels--dark q-dark":""));return()=>(m(n),ve("div",{class:o.value},e(),"pan",t.swipeable,()=>i.value))}}),Oe=R({name:"QTabPanel",props:Ve,setup(t,{slots:n}){return()=>P("div",{class:"q-tab-panel",role:"tabpanel"},Q(n.default))}}),Qe=({download_type:t,variant_type:n,phenotype_type:s})=>$fetch.raw("/api/download",{method:"GET",params:{download_type:t,variant_type:n,phenotype_type:s}}),Re={class:"row",style:{padding:"0 0px"}},Ke=he({__name:"download",setup(t){const n=be(),s=["SNP","InDel","SV","MNV"],p=["apaQTL","eQTL","meQTL","sQTL"],m=ee("apaQTL"),e=i=>{Qe(i).then(o=>{if(o.status!==200)throw console.log(o),new Error(`Download failed: ${o.message||"Unknown error"}`);const l=o.headers.get("Content-Type");if(console.log(l.startsWith("application/zip")),l&&(l.startsWith("text/plain")||l.startsWith("application/zip")||l.startsWith("application/gzip"))){let h="downloaded_file",u=o.headers.get("Content-Disposition")||"";if(u){const d=u.match(/filename=([^;]+)/);d&&d[1]&&(h=decodeURIComponent(d[1].trim()))}const f=document.createElement("a");f.href=window.URL.createObjectURL(o._data),f.download=h,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(f.href)}}).catch(o=>{n.notify({message:o.statusMessage||"Download failed",color:"warning",position:"bottom",timeout:1e3})})};return(i,o)=>{const l=xe,h=ye,u=ge,f=Be,d=Pe,y=Oe,_=Ue,q=Te;return C(),_e(q,{class:"q-mx-auto",style:{"min-height":"calc(100vh - 180px)",margin:"5px auto 0 auto"}},{default:b(()=>[z("div",Re,[v(u,{flat:"",bordered:"",style:{width:"1140px"},class:"col-10 q-mx-auto q-my-sm"},{default:b(()=>[o[2]||(o[2]=z("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," 1. Download Variant results ",-1)),v(u,{flat:"",bordered:""},{default:b(()=>[v(h,{class:"q-pa-md q-gutter-md"},{default:b(()=>[(C(),A(D,null,S(s,r=>v(l,{color:"grey-2","text-color":"indigo-8",key:r,label:`${r}-data`,"no-caps":"",unelevated:"",size:"15px",style:{width:"max-content"},onClick:x=>e({download_type:"variants",variant_type:r,phenotype_type:null,indicator_type:null})},null,8,["label","onClick"])),64))]),_:1})]),_:1})]),_:1}),v(u,{flat:"",bordered:"",style:{width:"1140px"},class:"col-10 q-mx-auto q-my-sm"},{default:b(()=>[o[3]||(o[3]=z("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," 2. Download MolQTL results ",-1)),v(h,{class:"no-padding text-body2"},{default:b(()=>[v(d,{id:"downloadTab",class:"bg-grey-3","active-class":"shadow-3 bg-white","outside-arrows":"","mobile-arrows":"","no-caps":"",stretch:"",dense:"",modelValue:G(m),"onUpdate:modelValue":o[0]||(o[0]=r=>Y(m)?m.value=r:null),align:"left","narrow-indicator":""},{default:b(()=>[(C(),A(D,null,S(p,r=>v(f,{key:r,name:r,label:r,class:"text-body1 text-bold"},null,8,["name","label"])),64))]),_:1},8,["modelValue"]),v(_,{modelValue:G(m),"onUpdate:modelValue":o[1]||(o[1]=r=>Y(m)?m.value=r:null),animated:""},{default:b(()=>[(C(),A(D,null,S(p,r=>v(y,{class:"q-gutter-md row",key:r,name:r},{default:b(()=>[(C(),A(D,null,S(s,x=>v(l,{key:x,"no-caps":"",unelevated:"",color:"grey-2","text-color":"indigo-8",size:"15px",label:`${x}-${r}`,style:{width:"max-content"},onClick:E=>e({download_type:"qtl",variant_type:x,phenotype_type:r,indicator_type:null})},null,8,["label","onClick"])),64))]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),v(u,{flat:"",bordered:"",style:{width:"1140px"},class:"col-10 q-mx-auto q-my-sm"},{default:b(()=>[o[4]||(o[4]=z("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," 3. Download GWAS results ",-1)),v(u,{flat:"",bordered:""},{default:b(()=>[v(h,{class:"q-pa-md q-gutter-md"},{default:b(()=>[(C(),A(D,null,S(s,r=>v(l,{color:"grey-2","text-color":"indigo-8",key:r,label:`${r}-GWAS`,"no-caps":"",unelevated:"",size:"15px",style:{width:"max-content"},onClick:x=>e({download_type:"gwas",variant_type:r,phenotype_type:null,indicator_type:null})},null,8,["label","onClick"])),64))]),_:1})]),_:1})]),_:1})])]),_:1})}}});export{Ke as default};
