import{d as me,H as _e,j,M as ve,r,N as G,O as ye,I as Q,v as T,A as l,z as a,P as fe,Q as xe,R as ge,x as o,B as v,S as be,L as qe,t as M,T as E,U as H,K as we,y as z,V as he,W as Ve}from"./BTGu2dYh.js";import{m as Ne}from"./DUAdsSfe.js";import{_ as Se}from"./3Ht2rspR.js";import{_ as Ie,a as Te,b as ke,c as Be,d as Pe,e as De,f as Me}from"./CbgbUNeg.js";import{_ as Re,a as $e}from"./B-z2BPVc.js";import{_ as Ce}from"./B4eBHn-4.js";import{_ as Ee}from"./D8G4fVbO.js";import{q as He}from"./wea4sSe8.js";import"./BQTLAjhu.js";const A=({variant_type:w,variant_id:c,indicator_type:b,indicator_name:m,page:k=1,pageSize:B=10,sortBy:R="FDR",order:p=1})=>$fetch("/api/gwas",{method:"GET",params:{variant_type:w,variant_id:c,indicator_type:b,indicator_name:m,page:k,pageSize:B,sortBy:R,order:p}}),ze=({variant_type:w,indicator_type:c,indicator_name:b})=>$fetch("/api/manhattan",{method:"GET",params:{variant_type:w,indicator_type:c,indicator_name:b}}),Fe=({indicator_type:w,input:c})=>$fetch("/api/hint_indicator",{method:"GET",params:{indicator_type:w,input:c}}),Oe={class:"row"},Ue={class:"col-12 col-sm-4 items-center justify-between q-my-xs"},je={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},Ge={class:"row"},Qe={class:"col-12 col-sm-4 items-center justify-between q-my-xs"},Ae={class:"col-12 col-sm-8 items-center justify-between q-my-xs"},We={class:"col-12 col-sm-6"},Le={class:"row items-center justify-center q-gutter-x-xl"},Ke={class:"row justify-center q-pb-sm q-my-xs"},Je={class:"q-px-sm q-gutter-x-xs"},Xe={class:"row no-wrap q-pl-md q-gutter-x-lg"},Ye={class:"text-primary"},Ze={class:"row no-wrap"},ut=me({__name:"index",setup(w){const c=_e(),b=j(()=>c.screen.lt.sm),m=ve(),k=r(!1),B=r(""),R=n=>{ze({variant_type:n.Variant_type,indicator_type:n.Indicator_type,indicator_name:n.Indicator_name}).then(e=>{const d=e;d.data?(k.value=!0,B.value=d.data.figure_base64_code):c.notify({message:"No data found!",color:"negative",icon:"warning"})})},p=r(null),f=r(null),y=r(null),x=r(null),g=G({variant_type:null,variant_id:null,indicator_type:null,indicator_name:null}),u=G({SNP:0,MNV:0,InDel:0,SV:0,Pathology:0,Nutrition:0,Toxin:0,Measurement:0,Hormone:0,Questionnaire:0}),W=["SNP","MNV","InDel","SV"],L=["Pathology","Nutrition","Toxin","Measurement","Hormone","Questionnaire"],h=r([]),V=r([]),P=r(null),D=r(null),K=(n,e,d)=>{e(()=>{n===""?h.value=[]:He({variant_type:y.value,input:n}).then(s=>{const i=s;i.data.length?h.value=i.data:h.value=[n],h.value=i.data,n!==""&&P.value.options.length&&(P.value.setOptionIndex(-1),P.value.moveOptionSelection(1,!0))}).catch(s=>{h.value=[n]})}),d(()=>{})},J=(n,e,d)=>{e(()=>{n===""?V.value=[]:Fe({indicator_type:p.value,input:n}).then(s=>{const i=s;i.data.length?V.value=i.data:V.value=[n],V.value=i.data,n!==""&&D.value.options.length&&(D.value.setOptionIndex(-1),D.value.moveOptionSelection(1,!0))}).catch(s=>{V.value=[n]})}),d(()=>{})},X=j(()=>{const n=!!y.value,e=!!x.value,d=!!p.value,s=!!f.value;return n||e||d||s}),Y=[{label:"example1",variantType:"SV",variantID:null,indicatorType:"Toxin",indicatorName:null,disable:!1},{label:"example2",variantType:"MNV",variantID:null,indicatorType:"Hormone",indicatorName:null,disable:!1},{label:"example3",variantType:"InDel",variantID:null,indicatorType:"Nutrition",indicatorName:null,disable:!1}],Z=n=>{p.value=n.indicatorType,f.value=n.indicatorName,y.value=n.variantType,x.value=n.variantID},$=r([]),N=r(!1),_=r({page:1,rowsPerPage:15,rowsNumber:0,sortBy:"FDR",descending:!1}),ee=n=>{N.value=!0;const{page:e,rowsPerPage:d,sortBy:s,descending:i}=n.pagination;A({variant_type:g.variant_type,variant_id:g.variant_id,indicator_type:g.indicator_type,indicator_name:g.indicator_name,page:e,pageSize:d,sortBy:s,order:i?-1:1}).then(C=>{const q=C;$.value=q.data,_.value.rowsNumber=q.total}).finally(()=>{N.value=!1,_.value.page=e,_.value.rowsPerPage=d,_.value.sortBy=s,_.value.descending=i})},te=r(!1),ne=()=>{c.notify({message:"Download will be not available untill published",color:"negative",icon:"warning"})},F=()=>{X.value?(N.value=!0,A({variant_type:y.value,variant_id:x.value,indicator_type:p.value,indicator_name:f.value,page:1,pageSize:_.value.rowsPerPage,sortBy:_.value.sortBy,order:_.value.descending?-1:1}).then(n=>{const e=n;e.total?($.value=e.data,_.value.rowsNumber=e.total,g.variant_type=y.value,g.variant_id=x.value,g.indicator_type=p.value,g.indicator_name=f.value,u.SNP=e.stat.SNP,u.MNV=e.stat.MNV,u.InDel=e.stat.InDel,u.SV=e.stat.SV,u.Pathology=e.stat.Pathology,u.Nutrition=e.stat.Nutrition,u.Toxin=e.stat.Toxin,u.Measurement=e.stat.Measurement,u.Hormone=e.stat.Hormone,u.Questionnaire=e.stat.Questionnaire):c.notify({message:"No data found!",color:"negative",icon:"warning"}),N.value=!1}).catch(n=>{c.notify({message:n,color:"negative",icon:"warning"}),N.value=!1})):c.notify({message:"Please input at least one field!",color:"negative",icon:"warning"})},ae=()=>{p.value=null,f.value=null,y.value=null,x.value=null};return ye(()=>{Object.keys(m.query).length?(y.value=m.query.variant_type?String(m.query.variant_type):"SV",x.value=m.query.variant_id?String(m.query.variant_id):null,p.value=m.query.indicator_type?String(m.query.indicator_type):null,f.value=m.query.indicator_name?String(m.query.indicator_name):null):(y.value="SV",x.value=null,p.value=null,f.value=null),F()}),(n,e)=>{const d=Se,s=ge,i=xe,C=fe,q=Te,O=$e,U=Re,S=qe,oe=Ie,le=Me,se=De,ie=Pe,re=Ce,ue=Be,de=ke,ce=Ee;return T(),Q(ce,{style:{"min-height":"calc(100vh - 125px)",margin:"5px auto 0 auto"},class:"q-pa-md"},{default:l(()=>[a(C,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t)},{default:l(()=>[a(i,{style:{width:"600px",height:"480px"}},{default:l(()=>[a(s,null,{default:l(()=>[a(d,{src:"data:image/png;base64,"+B.value,"spinner-color":"white",fit:"scale-down"},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(i,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-none"},{default:l(()=>[a(s,{class:"row q-py-none q-px-none"},{default:l(()=>e[6]||(e[6]=[o("div",{class:"full-width q-px-md q-py-sm text-subtitle2 text-primary text-bold",style:{"background-color":"#e3f2fd","font-size":"20px","line-height":"1.3"}}," Search GWAS by Variant or Indicator ",-1)])),_:1}),a(s,{class:"q-px-md q-pt-md q-pb-sm"},{default:l(()=>e[7]||(e[7]=[o("div",{class:"text-body1 text-grey-8",style:{"line-height":"1.7"}},[v(" This module provides "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 101,292 "),v(" genome-wide association results identified from 148 healthy Chinese individuals, linking genetic variants to "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 162 clinical traits "),v(" spanning pathological, metabolic, hormonal, anthropometric, imaging, nutritional, environmental toxin categories, and questionnaire-based assessments. The GWAS dataset comprises associations derived from four variant types: "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 89,104 "),v(" SNV associations, "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 6,707 "),v(" InDel associations, "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 4,185 "),v(" MNV associations, and "),o("span",{class:"text-bold rounded-borders q-px-xs",style:{"padding-left":"0","margin-left":"0",color:"red","background-color":"white"}}," 1,296 "),v(" SV associations. "),o("br")],-1)])),_:1}),a(oe,{onSubmit:F,onReset:ae,class:be([{"q-mx-auto":b.value},"q-py-sm"])},{default:l(()=>[o("div",Oe,[o("div",Ue,[e[8]||(e[8]=o("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Variant Type:",-1)),a(q,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Select variant type","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t),options:W},null,8,["modelValue"])]),o("div",je,[e[10]||(e[10]=o("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Variant ID:",-1)),a(q,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input variant ID","input-debounce":"1000",class:"col-12 col-sm-8 q-px-sm q-py-xs","input-class":"text-primary",modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=t=>x.value=t),options:h.value,onFilter:K,ref_key:"ref_variant_id",ref:P},{"no-option":l(()=>[a(U,null,{default:l(()=>[a(O,{class:"text-grey"},{default:l(()=>e[9]||(e[9]=[v(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),o("div",Ge,[o("div",Qe,[e[11]||(e[11]=o("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Indicator Type:",-1)),a(q,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Select indicator type","input-debounce":"1000",class:"col-sm-10 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t),options:L},null,8,["modelValue"])]),o("div",Ae,[e[13]||(e[13]=o("span",{class:"text-bold text-subtitle2 text-primary q-px-sm"},"Indicator name:",-1)),a(q,{dense:"",outlined:"",clearable:"","use-input":"","hide-dropdown-icon":"","label-color":"primary",label:"Input indicator name","input-debounce":"1000",class:"col-sm-4 col-12 q-px-sm q-py-xs","input-class":"text-primary",modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),options:V.value,onFilter:J,ref_key:"ref_indicator_name",ref:D},{"no-option":l(()=>[a(U,null,{default:l(()=>[a(O,{class:"text-grey"},{default:l(()=>e[12]||(e[12]=[v(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),o("div",We,[o("div",Le,[a(S,{unelevated:"","no-caps":"",color:"primary",label:"Submit",type:"submit"}),a(S,{unelevated:"","no-caps":"",color:"negative",label:"Reset",type:"reset"})])])]),_:1},8,["class"]),o("div",Ke,[o("div",Je,[(T(),M(E,null,H(Y,t=>a(S,{class:"text-indigo-6",key:t.label,label:t.label,dense:b.value,disable:t.disable,flat:"","no-caps":"",ripple:!1,onClick:I=>Z(t)},null,8,["label","dense","disable","onClick"])),64))])])]),_:1}),a(i,{flat:"",bordered:"",style:{"max-width":"1140px"},class:"q-mx-auto q-my-md q-px-none"},{default:l(()=>[a(de,{flat:"","row-key":"label",pagination:_.value,"onUpdate:pagination":e[5]||(e[5]=t=>_.value=t),rows:$.value,columns:we(Ne),dense:b.value,loading:N.value,"rows-per-page-options":[15,50,100],"rows-per-page-label":"Rows per page:","pagination-label":(t,I,pe)=>`${t}~${I} / ${pe}`,onRequest:ee,separator:"cell","no-data-label":"No data"},{loading:l(()=>[a(le,{showing:"",color:"primary"})]),"top-left":l(()=>[o("div",Xe,[(T(!0),M(E,null,H(Object.keys(u),t=>he((T(),M("div",{key:t,class:"col-auto text-center text-subtitle1 text-bold"},[o("div",null,z(u[t]),1),o("div",Ye,z(t),1)])),[[Ve,u[t]!==0]])),128))])]),"top-right":l(t=>[o("div",Ze,[a(S,{flat:"",dense:"",ripple:!1,icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen},null,8,["icon","onClick"]),a(S,{flat:"",dense:"",ripple:!1,loading:te.value,icon:"file_download",onClick:ne},null,8,["loading"])])]),header:l(t=>[a(ie,{props:t},{default:l(()=>[(T(!0),M(E,null,H(t.cols,I=>(T(),Q(se,{key:I.name,props:t,class:"text-primary",style:{"font-weight":"bold","font-size":"14px"}},{default:l(()=>[v(z(I.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-Plot":l(t=>[a(ue,{key:"plot",props:t},{default:l(()=>[a(S,{size:"md",color:"primary",icon:"bar_chart",dense:"",rounded:"",outline:"",onClick:I=>R(t.row)},{default:l(()=>[a(re,null,{default:l(()=>e[14]||(e[14]=[v(" Show boxplot ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns","dense","loading","pagination-label"])]),_:1})]),_:1})}}});export{ut as default};
